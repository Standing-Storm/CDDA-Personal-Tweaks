[
  {
    "id": "feline_periapta",
    "copy-from": "diamond_gold_pendant_necklace",
    "type": "ITEM",
    "subtypes": [ "ARMOR" ],
    "name": { "str": "feline periapta" },
    "description": "A shiny, gold necklace adorned with an image of a cat with strange runes on it and diamond eyes.",
    "material": [ { "type": "gold", "portion": 9 }, { "type": "diamond" } ],
    "color": "white",
    "extend": { "flags": [ "RELIC_PINK" ] },
    "delete": { "flags": [ "NO_WEAR_EFFECT" ] }
  },
  {
    "type": "effect_type",
    "id": "effect_feline_periapta_tracker",
    "name": [ "" ],
    "desc": [ "" ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_XE_PUT_ON_FELINE_PERIAPTA",
    "eoc_type": "EVENT",
    "required_event": "character_wears_item",
    "condition": { "compare_string": [ "feline_periapta", { "context_val": "itype" } ] },
    "effect": [
      {
        "if": { "not": { "u_has_trait": "CLAWS_RETRACT" } },
        "then": [ { "u_add_effect": "effect_feline_periapta_tracker", "duration": "PERMANENT" }, { "u_add_trait": "CLAWS_RETRACT" } ]
      },
      { "u_message": "The wearing EoC is firing.", "type": "debug" }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_XE_TAKE_OFF_FELINE_PERIAPTA",
    "eoc_type": "EVENT",
    "required_event": "character_takeoff_item",
    "condition": { "compare_string": [ "feline_periapta", { "context_val": "itype" } ] },
    "effect": [
      {
        "if": { "not": { "u_has_effect": "effect_feline_periapta_tracker" } },
        "then": [
          { "u_lose_effect": "effect_feline_periapta_tracker" },
          { "u_lose_trait": "CLAWS_RETRACT" },
          { "u_lose_trait": "CLAWS_RETRACT_active" }
        ]
      },
      { "u_message": "The unwearing EoC is firing.", "type": "debug" }
    ]
  }
]
